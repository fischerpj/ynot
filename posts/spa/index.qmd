---
title: "Single Page App"
date: "2026-02-05"
image: "hurdler.jpg"
category: it
format: html
echo: false
---

> Single-Page -App with Quarto + OJS

1.  INPUT cell Input_Row with OJS Inputs & Buttons, well Boostrap styled
2.  FETCH cell. DO: if error
3.  DISPLAY cell use CSS Grid for layout. DO: DOM.append like
4.  IFRAME cell

```{ojs}
// IMPORT JS code

import { Bcve, Ref } from "./BibleBooksCodes_Tables.js";

```


```{ojs}
//| echo: false

//-----------------------------------------------------------
// I0. STATIC DIV-CONTAINER with .button-row class 
// used as programmatic trigger to row and children styling

container = html`<div id="row_container" class="button-row">
placeholder container text will be overwritten
 </div>`
 
output_div = html`<div id="output_div">
outputdiv  container text will be overwritten
 </div>`
 
//-----------------------------------------------------------
// I2. OJS INPUTS created + styled ie Editable input field

viewof RefInput = {
  const inputText = Inputs.text({
  value: "Gen1:1",
  style: "width: 80px;",
  })
  return inputText
}

// BOOSTRAP STYLING YIELD via classes added to its <input> element
restyl = {
 const IS = viewof RefInput.querySelector('input');
 if (IS) {
    IS.classList.add("form-control", "form-control-lg");
  };
};

//-----------------------------------------------------------
// I3  OJS_BUTTONS created by Three Instances

viewof btnA = Inputs.button("Store");
viewof btnB = Inputs.button("Clip");
viewof btnC = Inputs.button("Help");

// I4. SIDE-EFFECT DOM insertion-operations

result = {
  const midiv = document.querySelector("#row_container");
  midiv.replaceChildren(viewof RefInput, viewof btnA, viewof btnB, viewof btnC);
}

// I5 RESTYLE OJS viewof buttons PROGRAMMATICALLY

restyle = {
  // APPLY STYLE to PARENT button-row container
  const mirow = document.querySelector("div.button-row");
    mirow.style.display = "flex";
    mirow.style.width = "100%";
    mirow.style.gap = "3px"; // between children spacing

 const AS = viewof btnA.querySelector('button.btn.btn-quarto');
 if (AS) {
    AS.classList.add('btn-warning');
    AS.classList.remove('btn-quarto');
  };
  
  const HB = viewof btnB.querySelector('button.btn.btn-quarto');
  if (HB) {
    HB.classList.add('btn-info');
    HB.classList.remove('btn-quarto');
  }
  
  const CB = viewof btnC.querySelector('button.btn.btn-quarto');
   if (CB) {
//     CB.style.color = "black";
     CB.classList.add('btn-success');
     CB.classList.remove('btn-quarto');
//   addmib.style.cssText = "color: white; background-color: red;";
  }

// this is inoperative here !? let mini_styles.css do it 
/*  mirow.querySelectorAll("button").forEach(btn => {
    btn.style.flex = "1";
    btn.style.margin = "20px";
  });
*/  
}
 
```


```{ojs}
//| echo: false

// FETCH DATA transform Input to Data

//================== REACTIVE PREVIEW OF INPUT 
RefPreview = {
  const mb = new Bcve(RefInput);
  
    const mir = new Ref(mb.param);
    await mir.fetch_parallel();   // Wait for data to be fetched
    const result = await mir.data;
    return result
  };

// Display the list IF VALID
RefResult = {
  RefPreview.map(item => html`<div style="line-height: 1.4; margin-bottom: 10px; color: amber"><strong>${item.ref}</strong> ${item.content} <em>${item.version}</em></div>`)
}

dummy = {
  const out = document.querySelector("#output_div");
  const ul = document.createElement("ul");
  
  RefPreview.forEach(item => {
    const li = document.createElement('li');
    li.textContent = item.content;
    ul.appendChild(li);
    });
  out.appendChild(ul);
//  out.textContent = RefPreview[0].content;
  }
```